<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Customer Feedback – Nasagh</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body class="bg-light">
    <nav class="navbar navbar-expand-lg navbar-white bg-white fixed-top shadow-sm">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="index.html">
                <img src="images/oud1 - Copy-Recovered.png" alt="Nasagh Logo" height="50" class="me-2">
                <div class="d-flex flex-column">
                    <span class="fw-bold fs-4">NASAGH</span>
                    <small class="text-muted fst-italic">Timeless Essence of Oud</small>
                </div>
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="shop.html">Collection</a></li>
                    <li class="nav-item"><a class="nav-link" href="about.html">Our Story</a></li>
                    <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
                    <li class="nav-item"><a class="nav-link" href="account.html">Account</a></li>
                    <li class="nav-item"><a class="nav-link" href="cart.html">Cart</a></li>
                    <li class="nav-item"><a class="nav-link active fw-bold" href="questionnaire.html">Questionnaire</a></li>
                    <li class="nav-item"><a class="nav-link" href="calculate.html">Calculator</a></li>
                    <li class="nav-item"><a class="nav-link" href="funpage.html">Fun Page</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <main class="container mt-5 pt-5">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card border-0 shadow">
                    <div class="card-body p-4 p-md-5">
                        <div class="text-center mb-5">
                            <i class="bi bi-chat-square-text display-4 text-primary mb-3"></i>
                            <h1 class="card-title">Customer Feedback Form</h1>
                            <p class="lead text-muted">Help us improve by sharing your experience with Nasagh</p>
                        </div>

                        <form id="feedbackForm" class="needs-validation" novalidate>
                            <div class="mb-4">
                                <h4 class="border-bottom pb-2 mb-3">Personal Information</h4>
                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label for="fullName" class="form-label">Full Name *</label>
                                        <input type="text" class="form-control" id="fullName" name="fullName" required 
                                               pattern="[A-Za-z\s]{2,50}">
                                        <div class="invalid-feedback">Please provide your full name (2-50 letters only).</div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="email" class="form-label">Email Address *</label>
                                        <input type="email" class="form-control" id="email" name="email" required
                                               pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$">
                                        <div class="invalid-feedback">Please provide a valid email address.</div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="phone" class="form-label">Phone Number</label>
                                        <input type="tel" class="form-control" id="phone" name="phone"
                                               pattern="[\+]?[968]{3}[\s]?[0-9]{8}">
                                        <div class="invalid-feedback">Please provide a valid Omani phone number.</div>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="age" class="form-label">Age Group *</label>
                                        <select class="form-select" id="age" name="age" required>
                                            <option value="">Select age group...</option>
                                            <option value="18-25">18-25 years</option>
                                            <option value="26-35">26-35 years</option>
                                            <option value="36-45">36-45 years</option>
                                            <option value="46-60">46-60 years</option>
                                            <option value="60+">60+ years</option>
                                        </select>
                                        <div class="invalid-feedback">Please select your age group.</div>
                                    </div>
                                </div>
                            </div>

                            <div class="mb-4">
                                <h4 class="border-bottom pb-2 mb-3">Product Experience</h4>
                                <div class="mb-3">
                                    <label class="form-label">Which Nasagh products have you tried? *</label>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-check mb-2">
                                                <input class="form-check-input" type="checkbox" name="products" value="midnight-oud" id="midnightOud">
                                                <label class="form-check-label" for="midnightOud">Midnight Oud</label>
                                            </div>
                                            <div class="form-check mb-2">
                                                <input class="form-check-input" type="checkbox" name="products" value="desert-rose" id="desertRose">
                                                <label class="form-check-label" for="desertRose">Desert Rose</label>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-check mb-2">
                                                <input class="form-check-input" type="checkbox" name="products" value="royal-amber" id="royalAmber">
                                                <label class="form-check-label" for="royalAmber">Royal Amber</label>
                                            </div>
                                            <div class="form-check mb-2">
                                                <input class="form-check-input" type="checkbox" name="products" value="amber-flame" id="amberFlame">
                                                <label class="form-check-label" for="amberFlame">Amber Flame</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="invalid-feedback">Please select at least one product.</div>
                                </div>

                                <div class="mb-3">
                                    <label for="satisfaction" class="form-label">Overall Satisfaction *</label>
                                    <div class="d-flex justify-content-between text-muted small mb-2">
                                        <span>Very Dissatisfied</span>
                                        <span>Very Satisfied</span>
                                    </div>
                                    <input type="range" class="form-range" id="satisfaction" name="satisfaction" min="1" max="5" value="3" required>
                                    <div class="d-flex justify-content-between">
                                        <span>1</span><span>2</span><span>3</span><span>4</span><span>5</span>
                                    </div>
                                </div>
                            </div>

                            <div class="mb-4">
                                <h4 class="border-bottom pb-2 mb-3">Detailed Feedback</h4>
                                <div class="mb-3">
                                    <label for="likes" class="form-label">What do you like most about our products? *</label>
                                    <textarea class="form-control" id="likes" name="likes" rows="3" required 
                                              minlength="10" maxlength="500"></textarea>
                                    <div class="form-text"><span id="likesCount">0</span>/500 characters</div>
                                    <div class="invalid-feedback">Please provide at least 10 characters.</div>
                                </div>

                                <div class="mb-3">
                                    <label for="improvements" class="form-label">Any suggestions for improvement?</label>
                                    <textarea class="form-control" id="improvements" name="improvements" rows="3"
                                              maxlength="500"></textarea>
                                    <div class="form-text"><span id="improvementsCount">0</span>/500 characters</div>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label">How likely are you to recommend Nasagh to others? *</label>
                                    <div class="row text-center">
                                        <div class="col">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="recommend" id="veryLikely" value="very-likely" required>
                                                <label class="form-check-label" for="veryLikely">Very Likely</label>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="recommend" id="likely" value="likely">
                                                <label class="form-check-label" for="likely">Likely</label>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="recommend" id="neutral" value="neutral">
                                                <label class="form-check-label" for="neutral">Neutral</label>
                                            </div>
                                        </div>
                                        <div class="col">
                                            <div class="form-check">
                                                <input class="form-check-input" type="radio" name="recommend" id="unlikely" value="unlikely">
                                                <label class="form-check-label" for="unlikely">Unlikely</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="invalid-feedback">Please select your recommendation likelihood.</div>
                                </div>
                            </div>

                            <div class="mb-4">
                                <h4 class="border-bottom pb-2 mb-3">Contact Preferences</h4>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="newsletter" name="newsletter">
                                    <label class="form-check-label" for="newsletter">Subscribe to our newsletter for updates</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="contactOk" name="contactOk">
                                    <label class="form-check-label" for="contactOk">I'm open to being contacted for follow-up feedback</label>
                                </div>
                            </div>

                            <div class="text-center">
                                <button type="submit" class="btn btn-primary btn-lg me-3">
                                    <i class="bi bi-send me-2"></i>Submit Feedback
                                </button>
                                <button type="reset" class="btn btn-outline-secondary btn-lg">Reset Form</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-dark text-light pt-5 mt-5">
        <div class="container">
            <div class="row g-4">
                <div class="col-lg-4">
                    <h5 class="fw-bold">نسغ Nasagh</h5>
                    <p>Timeless Arabian Perfumes</p>
                    <p class="small text-secondary">Crafting olfactory excellence since 2022</p>
                </div>
                <div class="col-lg-4">
                    <h5>Explore</h5>
                    <ul class="list-unstyled">
                        <li><a href="index.html" class="text-light text-decoration-none">Home</a></li>
                        <li><a href="shop.html" class="text-light text-decoration-none">Collection</a></li>
                        <li><a href="about.html" class="text-light text-decoration-none">Our Story</a></li>
                        <li><a href="contact.html" class="text-light text-decoration-none">Contact</a></li>
                        <li><a href="cart.html" class="text-light text-decoration-none">Cart</a></li>
                        <li><a href="newsletter.html" class="text-light text-decoration-none">Newsletter</a></li>
                        <li><a href="questionnaire.html" class="text-light text-decoration-none">Questionnaire</a></li>
                        <li><a href="calculate.html" class="text-light text-decoration-none">Calculator</a></li>
                        <li><a href="funpage.html" class="text-light text-decoration-none">Fun Page</a></li>
                    </ul>
                </div>
                <div class="col-lg-4">
                    <h5>Connect</h5>
                    <p>Email: s150229@student.squ.edu.om</p>
                    <p>Phone: +968 71183928</p>
                    <p>Muscat, Sultanate of Oman</p>
                </div>
            </div>
            <div class="row mt-4 pt-4 border-top border-secondary">
                <div class="col-12 text-center">
                    <p class="mb-0">&copy; 2025 Nasagh Inc. All rights reserved. | Crafted by WEB Crafters Team</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.getElementById('feedbackForm');
        const likesTextarea = document.getElementById('likes');
        const improvementsTextarea = document.getElementById('improvements');
        const likesCount = document.getElementById('likesCount');
        const improvementsCount = document.getElementById('improvementsCount');
        const phoneField = document.getElementById('phone');

        likesTextarea.addEventListener('input', function() {
            likesCount.textContent = this.value.length;
            if (this.value.length < 10) {
                this.classList.add('is-invalid');
            } else {
                this.classList.remove('is-invalid');
            }
        });

        improvementsTextarea.addEventListener('input', function() {
            improvementsCount.textContent = this.value.length;
        });

        const productCheckboxes = document.querySelectorAll('input[name="products"]');
        productCheckboxes.forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const atLeastOneChecked = Array.from(productCheckboxes).some(cb => cb.checked);
                productCheckboxes.forEach(cb => {
                    if (!atLeastOneChecked) {
                        cb.setCustomValidity('Please select at least one product');
                    } else {
                        cb.setCustomValidity('');
                    }
                });
            });
        });

        const nameInput = document.getElementById('fullName');
        nameInput.addEventListener('input', function() {
            const nameRegex = /^[A-Za-z\s]{2,50}$/;
            if (this.value && !nameRegex.test(this.value)) {
                this.setCustomValidity('Name should contain only letters and spaces (2-50 characters)');
            } else {
                this.setCustomValidity('');
            }
        });

        phoneField.addEventListener('input', function() {
            let digits = this.value.replace(/\D/g, '');
            
            if (digits.length > 8) {
                digits = digits.substring(0, 8);
            }
            
            if (digits.length > 0) {
                if (digits.charAt(0) !== '9' && digits.charAt(0) !== '7') {
                    digits = '';
                }
            }
            
            if (digits.length === 0) {
                this.value = '';
            } else {
                this.value = digits;
            }
        });

        phoneField.addEventListener('blur', function() {
            if (this.value.length === 8) {
                this.value = '+968 ' + this.value.substring(0, 4) + ' ' + this.value.substring(4);
            }
        });

        form.addEventListener('submit', function(event) {
            event.preventDefault();
            event.stopPropagation();

            let hasErrors = false;

            const name = document.getElementById('fullName').value.trim();
            const nameRegex = /^[A-Za-z\s]{2,50}$/;
            if (!nameRegex.test(name)) {
                showError('fullName', 'Enter valid name (2-50 letters only)');
                hasErrors = true;
            } else {
                clearError('fullName');
            }

            const email = document.getElementById('email').value.trim();
            const emailRegex = /^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$/;
            if (!emailRegex.test(email)) {
                showError('email', 'Enter a valid email address');
                hasErrors = true;
            } else {
                clearError('email');
            }

            const phone = document.getElementById('phone').value.trim();
            const phoneRegex = /^\+968\s?\d{8}$/;
            if (phone && !phoneRegex.test(phone)) {
                showError('phone', 'Enter valid Omani phone (e.g., +968 71183928)');
                hasErrors = true;
            } else {
                clearError('phone');
            }

            const age = document.getElementById('age').value;
            if (!age) {
                showError('age', 'Select your age group');
                hasErrors = true;
            } else {
                clearError('age');
            }

            const atLeastOneProduct = Array.from(document.querySelectorAll('input[name="products"]')).some(cb => cb.checked);
            if (!atLeastOneProduct) {
                const productSection = document.querySelector('.mb-3 label[for="midnightOud"]').closest('.mb-3');
                const errorDiv = document.createElement('div');
                errorDiv.className = 'text-danger small mt-1';
                errorDiv.textContent = 'Select at least one product';
                
                const existingError = productSection.querySelector('.text-danger');
                if (existingError) existingError.remove();
                
                productSection.appendChild(errorDiv);
                hasErrors = true;
            } else {
                const productSection = document.querySelector('.mb-3 label[for="midnightOud"]').closest('.mb-3');
                const existingError = productSection.querySelector('.text-danger');
                if (existingError) existingError.remove();
            }

            const satisfaction = document.getElementById('satisfaction').value;
            if (!satisfaction) {
                showError('satisfaction', 'Rate your satisfaction');
                hasErrors = true;
            } else {
                clearError('satisfaction');
            }

            const likes = document.getElementById('likes').value.trim();
            if (likes.length < 10) {
                showError('likes', 'Enter at least 10 characters');
                hasErrors = true;
            } else {
                clearError('likes');
            }

            const recommend = document.querySelector('input[name="recommend"]:checked');
            if (!recommend) {
                showError('veryLikely', 'Select recommendation likelihood');
                hasErrors = true;
            } else {
                clearError('veryLikely');
            }

            if (!hasErrors) {
                const formData = {
                    name: name,
                    email: email,
                    phone: phone,
                    age: age,
                    products: Array.from(document.querySelectorAll('input[name="products"]:checked')).map(cb => cb.value),
                    satisfaction: satisfaction,
                    likes: likes,
                    improvements: document.getElementById('improvements').value,
                    recommend: recommend.value,
                    newsletter: document.getElementById('newsletter').checked,
                    contactOk: document.getElementById('contactOk').checked
                };
                
                alert('Thank you for your valuable feedback! We appreciate your time.');
                form.reset();
                form.classList.remove('was-validated');
                likesCount.textContent = '0';
                improvementsCount.textContent = '0';
            } else {
                form.classList.add('was-validated');
            }
        });

        function showError(fieldId, message) {
            const field = document.getElementById(fieldId);
            const errorDiv = document.createElement('div');
            errorDiv.className = 'text-danger small mt-1';
            errorDiv.textContent = message;
            
            const existingError = field.parentNode.querySelector('.text-danger');
            if (existingError) existingError.remove();
            
            field.parentNode.appendChild(errorDiv);
            field.classList.add('is-invalid');
        }

        function clearError(fieldId) {
            const field = document.getElementById(fieldId);
            const existingError = field.parentNode.querySelector('.text-danger');
            if (existingError) existingError.remove();
            field.classList.remove('is-invalid');
        }
    });
    </script>
</body>
</html>
